<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>中央競馬 OCRスコアリング</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
<style>
body { font-family:sans-serif; background:#fafafa; padding:10px; }
input[type=file] { margin-bottom:10px; }
button { padding:12px; width:100%; font-size:18px; margin-bottom:10px; }
.race, .wide { display:block; padding:6px 10px; margin-bottom:6px; border-radius:8px; word-wrap: break-word; white-space: normal; overflow: visible; }
.race small { font-weight: normal; font-size: 0.85em; margin-left:6px; }
.a-axis { background:#ffdddd; border-left:6px solid #e60000; }
.b-axis { background:#fff0cc; border-left:6px solid #ff9900; }
.skip { background:#f0f0f0; color:#999; }
.wide { background:#ddf0ff; border-left:6px solid #3399ff; }
</style>
</head>
<body>

<h3>① 単勝・複勝・ワイドの画像をアップロード</h3>
<input type="file" id="image" accept="image/*">

<button onclick="processImage()">OCR解析・スコア表示</button>
<button onclick="clearAll()">クリア</button>

<div id="result"></div>

<script>
const result=document.getElementById("result");
function clearAll(){ result.innerHTML=""; }

async function processImage(){
    result.innerHTML="OCR解析中…お待ちください";
    const img=document.getElementById("image").files[0];
    if(!img){ result.innerHTML="画像を選択してください"; return; }

    const { data: { text } } = await Tesseract.recognize(img, 'jpn');
    result.innerHTML="<pre>OCR結果:\n"+text+"</pre>";

    // ここから既存のparseOdds / parseWide / calculateロジックを呼び出す
    // textを適切に単勝/複勝/ワイド形式に変換して calculate() に渡す
    // 例: calculateFromText(text)
    // calculateFromText() の中で parseOdds(text) / parseWide(text) を使用
}
</script>

</body>
</html>