<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>2ç•ªäººæ°—ãƒ¯ã‚¤ãƒ‰å®Œå…¨è‡ªå‹•åˆ¤å®šï¼ˆæœ€çµ‚ï¼‰</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background:#f2f2f7;
  margin:0;
  padding:16px;
}
h1 { font-size:18px; margin-bottom:10px; }
label { font-weight:600; font-size:14px; }
textarea,input {
  width:100%;
  font-size:16px;
  padding:10px;
  margin:6px 0 12px;
  border-radius:8px;
  border:1px solid #ccc;
}
button {
  width:100%;
  padding:14px;
  font-size:18px;
  border:none;
  border-radius:10px;
  background:#007aff;
  color:#fff;
}
.result {
  margin-top:14px;
  padding:14px;
  background:#fff;
  border-radius:10px;
  line-height:1.6;
}
.buy { color:#d70015; font-weight:700; }
.nobuy { color:#555; }
.small { font-size:13px; color:#666; }
.log { margin-top:12px; font-size:13px; }
</style>
</head>

<body>

<h1>ğŸ‡ 2ç•ªäººæ°—ãƒ¯ã‚¤ãƒ‰ï½œå®Œå…¨è‡ªå‹•åˆ¤å®šï¼ˆæœ€çµ‚ï¼‰</h1>

<label>å˜å‹ã‚ªãƒƒã‚ºï¼ˆäººæ°—é †ãƒ»æ”¹è¡Œï¼‰</label>
<textarea id="winOdds" rows="8"></textarea>

<label>ãƒ¯ã‚¤ãƒ‰ä¸‹é™ã‚ªãƒƒã‚º</label>
<input id="wide26" type="number" step="0.1" placeholder="2-6">
<input id="wide27" type="number" step="0.1" placeholder="2-7">

<label>æŠ•è³‡é‡‘é¡ï¼ˆå††ï¼‰</label>
<input id="bankroll" type="number" placeholder="ä¾‹ï¼š1000">

<button onclick="judge()">åˆ¤å®šã™ã‚‹</button>

<div id="result" class="result"></div>
<div id="history" class="log"></div>

<script>
function judge() {
  const winOdds = document.getElementById("winOdds").value
    .split("\n").map(v=>parseFloat(v)).filter(v=>!isNaN(v));
  const wide26 = parseFloat(document.getElementById("wide26").value);
  const wide27 = parseFloat(document.getElementById("wide27").value);
  const bankroll = parseInt(document.getElementById("bankroll").value || 0);
  const result = document.getElementById("result");

  if (winOdds.length < 7) {
    result.innerHTML = "<span class='nobuy'>NO-BUYï¼šå˜å‹ã‚ªãƒƒã‚ºä¸è¶³</span>";
    return;
  }

  // 2ç•ªäººæ°—ãƒã‚§ãƒƒã‚¯
  const axis = winOdds[1];
  if (axis < 3.5 || axis > 6.0) {
    result.innerHTML = "<span class='nobuy'>NO-BUYï¼š2ç•ªäººæ°—ã®å˜å‹ãŒæ¡ä»¶å¤–</span>";
    return;
  }

  // æ–­å±¤æ¤œå‡ºï¼ˆ1.8å€ï¼‰
  let faultIndex = -1;
  for (let i = 0; i < winOdds.length - 1; i++) {
    if (winOdds[i + 1] / winOdds[i] >= 1.8) {
      faultIndex = i + 1; // ä¸‹å´index
      break;
    }
  }

  if (faultIndex === -1) {
    result.innerHTML = "<span class='nobuy'>NO-BUYï¼šæ–­å±¤ãªã—</span>";
    return;
  }

  // â˜… æœ€é‡è¦ï¼š6ãƒ»7ã«é–¢ä¿‚ãªã„æ–­å±¤ã¯å³ãƒ–ãƒ­ãƒƒã‚¯ â˜…
  if (![5,6,7].includes(faultIndex)) {
    result.innerHTML =
      "<span class='nobuy'>NO-BUYï¼šæ–­å±¤ãŒ6ãƒ»7ç•ªäººæ°—ã«é–¢ä¿‚ãªã—</span><br>" +
      "<span class='small'>æ–­å±¤ä½ç½®ï¼š" + (faultIndex+1) + "â†’" + (faultIndex+2) + "ç•ªäººæ°—</span>";
    return;
  }

  // ãƒ¯ã‚¤ãƒ‰ä¸‹é™ãƒã‚§ãƒƒã‚¯
  let buys = [];
  if (wide26 >= 10) buys.push("2-6");
  if (wide27 >= 12) buys.push("2-7");

  if (buys.length === 0) {
    result.innerHTML = "<span class='nobuy'>NO-BUYï¼šãƒ¯ã‚¤ãƒ‰ä¸‹é™ä¸è¶³</span>";
    return;
  }

  // é…åˆ†æ±ºå®š
  let ratio6 = 0.5, ratio7 = 0.5;
  if (faultIndex === 5) { ratio6=0.6; ratio7=0.4; } // 5â†’6
  if (faultIndex === 6) { ratio6=0.7; ratio7=0.3; } // 6â†’7
  if (faultIndex === 7) { ratio6=0.4; ratio7=0.6; } // 7â†’8

  // åˆç®—å¹³å‡ã‚ªãƒƒã‚º
  let sum=0,count=0;
  if (buys.includes("2-6")) { sum+=wide26; count++; }
  if (buys.includes("2-7")) { sum+=wide27; count++; }
  const avg = sum/count;

  if (avg < 11.0) {
    result.innerHTML = "<span class='nobuy'>NO-BUYï¼šåˆç®—æœŸå¾…å€¤ä¸è¶³</span>";
    return;
  }

  // é‡‘é¡é…åˆ†
  let bet6=0, bet7=0;
  if (bankroll > 0) {
    bet6 = buys.includes("2-6") ? Math.round(bankroll * ratio6 / 100) * 100 : 0;
    bet7 = buys.includes("2-7") ? bankroll - bet6 : 0;
  }

  result.innerHTML =
    "<span class='buy'>BUYï¼š" + buys.join("ï¼‹") + "</span><br>" +
    "æ–­å±¤ä½ç½®ï¼š" + (faultIndex+1) + "â†’" + (faultIndex+2) + "ç•ªäººæ°—<br>" +
    "å¹³å‡ä¸‹é™ã‚ªãƒƒã‚ºï¼š" + avg.toFixed(1) + "<br>" +
    "é…åˆ†ï¼š2-6 " + Math.round(ratio6*100) + "% / 2-7 " + Math.round(ratio7*100) + "%<br>" +
    (bankroll>0 ? "è³¼å…¥é‡‘é¡ï¼š2-6 " + bet6 + "å†† / 2-7 " + bet7 + "å††" : "") +
    "<div class='small'>â€» æ¡ä»¶ï¼š3.5ã€œ6.0å€ãƒ»æ–­å±¤1.8å€ãƒ»ä¸‹é™10/12ãƒ»åˆç®—11</div>";

  saveHistory(result.innerText);
}

function saveHistory(text){
  let h = JSON.parse(localStorage.getItem("wideLog")||"[]");
  h.unshift(new Date().toLocaleString()+"ï½œ"+text);
  if (h.length>10) h.pop();
  localStorage.setItem("wideLog",JSON.stringify(h));
  renderHistory();
}

function renderHistory(){
  let h = JSON.parse(localStorage.getItem("wideLog")||"[]");
  document.getElementById("history").innerHTML =
    "<b>ç›´è¿‘ãƒ­ã‚°</b><br>"+h.join("<br><br>");
}
renderHistory();
</script>

</body>
</html>