<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JRA ãƒ¯ã‚¤ãƒ‰ç‰¹åŒ–ãƒ»æœ€çµ‚ç‰ˆ</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background:#f2f2f2;
  margin:0;
  padding:12px;
}
h1 {
  text-align:center;
  font-size:18px;
}
.section {
  background:#fff;
  border-radius:8px;
  padding:12px;
  margin-bottom:10px;
}
.label {
  font-weight:bold;
}
.condition {
  font-size:13px;
  color:#555;
  margin-top:4px;
}
.memo {
  margin-top:8px;
  padding:8px;
  background:#f7f7f7;
  border-left:4px solid #1976d2;
  font-size:13px;
  color:#444;
}
button, select, input {
  width:100%;
  margin-top:8px;
  padding:10px;
  font-size:16px;
}
button {
  background:#1976d2;
  color:#fff;
  border:none;
  border-radius:6px;
}
button.gray {
  background:#aaa;
}
.result {
  text-align:center;
  font-size:20px;
  padding:16px;
}
.buy { color:#0a7d32; }
.skip { color:#b00020; }
.hidden { display:none; }
small { color:#777; }
details { font-size:14px; }
</style>
</head>

<body>

<h1>JRA ãƒ¯ã‚¤ãƒ‰ç‰¹åŒ–ãƒ„ãƒ¼ãƒ«ï¼ˆæœ€çµ‚ç‰ˆï¼‰</h1>

<!-- â‘  æ–­å±¤ -->
<div class="section">
  <div class="label">â‘  æ–­å±¤ãƒã‚§ãƒƒã‚¯</div>
  <div class="condition">
    å˜å‹ã‚ªãƒƒã‚ºã§ç´„1.8å€ä»¥ä¸Šã®æ–­å±¤ãŒã‚ã‚‹ã‹
  </div>
  <button onclick="setLayer(true)">ã¯ã„ï¼ˆæ–­å±¤ã‚ˆã‚Šä¸Šã«è»¸å€™è£œã‚ã‚Šï¼‰</button>
  <button class="gray" onclick="setLayer(false)">ã„ã„ãˆï¼ˆè¦‹é€ã‚Šï¼‰</button>
</div>

<!-- â‘¡ è»¸ -->
<div class="section hidden" id="axisSec">
  <div class="label">â‘¡ è»¸é¦¬ã®å˜å‹äººæ°—</div>
  <div class="condition">
    æ¡ä»¶ï¼š2ã€œ5ç•ªäººæ°— ï¼‹ æ–­å±¤ã‚ˆã‚Šä¸Š
  </div>
  <select id="axis">
    <option value="">é¸æŠ</option>
    <option value="2">2ç•ªäººæ°—</option>
    <option value="3">3ç•ªäººæ°—</option>
    <option value="4">4ç•ªäººæ°—</option>
    <option value="5">5ç•ªäººæ°—</option>
  </select>
</div>

<!-- â‘¢ ç›¸æ‰‹ -->
<div class="section hidden" id="pairSec">
  <div class="label">â‘¢ ç›¸æ‰‹é¦¬ã®å˜å‹äººæ°—</div>
  <div class="condition">
    æ¡ä»¶ï¼š6ã€œ10ç•ªäººæ°—ï¼ˆ1é ­ã®ã¿ï¼‰
  </div>

  <div class="memo">
    å˜å‹äººæ°— <b>6ã€œ10ç•ªäººæ°—</b> ã®ä¸­ã‹ã‚‰<br><br>
    ã€ç›¸æ‰‹æ¡ä»¶ã€‘<br>
    ãƒ»ãƒ¯ã‚¤ãƒ‰äººæ°—ï¼š<b>5ä½ä»¥ä¸‹</b><br>
    ãƒ»è»¸ã¨ã®ãƒ¯ã‚¤ãƒ‰ã‚ªãƒƒã‚ºï¼š<b>6.0ã€œ12.0</b><br><br>
    ğŸ‘‰ <b>ã»ã¼1é ­ã«çµã‚‰ã‚Œã‚‹</b>
  </div>

  <select id="pair">
    <option value="">é¸æŠ</option>
    <option value="6">6ç•ªäººæ°—</option>
    <option value="7">7ç•ªäººæ°—</option>
    <option value="8">8ç•ªäººæ°—</option>
    <option value="9">9ç•ªäººæ°—</option>
    <option value="10">10ç•ªäººæ°—</option>
  </select>
</div>

<!-- â‘£ ã‚ªãƒƒã‚º -->
<div class="section hidden" id="oddsSec">
  <div class="label">â‘£ ãƒ¯ã‚¤ãƒ‰ã‚ªãƒƒã‚º</div>
  <div class="condition">
    æ¡ä»¶ï¼š6.0ã€œ12.0
  </div>
  <input type="number" step="0.1" id="odds" placeholder="ä¾‹ï¼š7.4">
</div>

<!-- â‘¤ é–‹å‚¬å ´ -->
<div class="section hidden" id="placeSec">
  <div class="label">â‘¤ é–‹å‚¬å ´</div>
  <div class="condition">
    â€» JRAå…¨ç«¶é¦¬å ´å¯¾è±¡
  </div>
  <select id="place">
    <option value="">é¸æŠ</option>
    <option value="stable">æ±äº¬</option>
    <option value="stable">é˜ªç¥</option>
    <option value="stable">æ–°æ½Ÿ</option>
    <option value="normal">ä¸­å±±</option>
    <option value="normal">äº¬éƒ½</option>
    <option value="wild">ç¦å³¶</option>
    <option value="wild">å°å€‰</option>
    <option value="wild">æœ­å¹Œ</option>
    <option value="wild">å‡½é¤¨</option>
  </select>
  <small>å†…éƒ¨çš„ã«å®‰å®š / æ¨™æº– / æ³¢ä¹±ã«åˆ†é¡ã•ã‚Œã¾ã™</small>
</div>

<!-- åˆ¤å®š -->
<div class="section hidden" id="judgeSec">
  <button onclick="judge()">åˆ¤å®šã™ã‚‹</button>
</div>

<!-- çµæœ -->
<div class="section hidden result" id="result"></div>

<!-- æˆç¸¾ -->
<div class="section">
  <details>
    <summary>æˆç¸¾ã‚’è¦‹ã‚‹ï¼ˆåˆ¤å®šã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ï¼‰</summary>
    <p>è³¼å…¥æ•°ï¼š<span id="buyCnt">0</span></p>
    <p>çš„ä¸­æ•°ï¼š<span id="hitCnt">0</span></p>
    <p>å›åç‡ï¼š<span id="rate">0</span>%</p>
    <button class="gray" onclick="hit()">çš„ä¸­</button>
    <button class="gray" onclick="miss()">ãƒã‚ºãƒ¬</button>
  </details>
</div>

<script>
let lastTime = 0;
let stats = { buy:0, hit:0, bet:0, ret:0 };
let lastOdds = 0;

function setLayer(v){
  if(!v){
    showSkip();
    return;
  }
  axisSec.classList.remove("hidden");
}

axis.onchange = () => pairSec.classList.remove("hidden");
pair.onchange = () => oddsSec.classList.remove("hidden");
odds.oninput = () => placeSec.classList.remove("hidden");
place.onchange = () => judgeSec.classList.remove("hidden");

function factor(t){
  if(t==="stable") return 1.0;
  if(t==="normal") return 0.95;
  return 0.9;
}

function judge(){
  const now = Date.now();
  if(now - lastTime < 30000){
    alert("30ç§’å¾…ã£ã¦ãã ã•ã„");
    return;
  }
  lastTime = now;

  const o = Number(odds.value);
  const f = factor(place.value);

  if(o < 6 || o > 12){
    showSkip();
    return;
  }

  const score = (12 - o) * f;
  if(score > 3){
    stats.buy++;
    stats.bet += 100;
    lastOdds = o;
    showBuy();
  } else {
    showSkip();
  }
  update();
}

function showBuy(){
  result.className = "section result buy";
  result.innerHTML = "âœ… BUY<br>ãƒ¯ã‚¤ãƒ‰1ç‚¹ã®ã¿<br>è³‡é‡‘ã®2ï¼…";
  result.classList.remove("hidden");
}

function showSkip(){
  result.className = "section result skip";
  result.innerHTML = "âŒ SKIP<br>æ¬¡ã®ãƒ¬ãƒ¼ã‚¹ã¸";
  result.classList.remove("hidden");
}

function hit(){
  stats.hit++;
  stats.ret += lastOdds * 100;
  update();
}
function miss(){ update(); }

function update(){
  buyCnt.textContent = stats.buy;
  hitCnt.textContent = stats.hit;
  rate.textContent =
    stats.bet ? Math.round(stats.ret / stats.bet * 100) : 0;
}
</script>

</body>
</html>